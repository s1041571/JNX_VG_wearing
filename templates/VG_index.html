<!doctype html>
<html lang="en" style="height: 100%">

<head>
    <link rel="icon" href="../static/img/enter.ico" type="image/x-icon" />
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="Enterport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <!--ICON-->
    <link rel="stylesheet" href="../static/bootstrap_icons-1.4.1/font/bootstrap-icons.css">
    <link rel="stylesheet" href="../static/fontawesome-free-5.15.3-web/css/all.css">
    <!--Bootstrap-->
    <link rel="stylesheet" href="../static/bootstrap-5.0.0-beta3-dist/css/bootstrap.min.css">
    <!-- Sweet Alert -->
    <script src="../static/sweetalert-master/sweetalert.min.js"></script>
    <link rel="stylesheet" href="../static/info_dt.css" />
    <link rel="stylesheet" href="../static/temp/vg_topic.css" />
    <link rel="stylesheet" href="../static/temp/w3.css" />
    <!-- Loader Css-->
    <link rel="stylesheet" href="../static/temp/loader-curtain.css" />

    <title>Vision Guard</title>
    <style>
        a {
            cursor: pointer;
            color:inherit;
        }
    </style>
</head>

<body class="bg-light py-2 overflow-hidden">
    <div class="container-fluid">
        <div class="row  text-center">
            <ul class="nav justify-content-end">
                {% if current_user.is_authenticated %}
                <li class="nav-item mr-2">
                    <button class="btn" id="logout_Btn" data-bs-toggle="tooltip" data-bs-placement="bottom" title="登出">
                        <i class="fas fa-sign-out-alt w3-text-red" style="font-size: 18px;"></i>
                    </button>
                </li>
                {% else %}
                <li class="nav-item mx-1">
                    <a href="/login">
                        <button class="btn w-auto w3-red" style="border-radius: 20px;" data-bs-toggle="tooltip" data-bs-placement="bottom" title="管理者登入">
                            Sign in
                        </button>
                    </a>
                </li>
                {% endif %}
                <li class="nav-item mx-1">
                    <a href="/global_setting">
                        <button class="btn " data-bs-toggle="tooltip" data-bs-placement="bottom" title="設定">
                            <i class="fas fa-cog" style="font-size: 18px;"></i>
                        </button>
                    </a>
                </li>
            </ul>
            <div class="col-12">
                <label class="h2 fw-bolder page-title">Vision Guard 五大主軸系統</label>
            </div>
        </div>
        <div class="row px-2">
            <div class="col topic">
                <div class="box box1">
                    <div class="frame"><img src="../static/img/transformer.jpg" id="img-center"></div>
                    <div class="box-content">
                        <div class="inner-content">
                            <h2 class="title">物件監控</h2>
                            <span class="post">利用距離轉換、物件辨識，達到現地警示、稽核通報</span>
                            <ul class="icon">
                                <li><a onclick="start_app('vf')"><i class="fas fa-door-open mr-1"></i>Enter</a>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col topic mx-1">
                <div class="box box2">
                    <div class="frame"><img src="../static/img/helmet.jpg" id="topic2"></div>
                    <div class="box-content">
                        <div class="inner-content">
                            <h2 class="title">裝備偵測</h2>
                            <span class="post">無人管制場景下，管控人員是否有確實穿戴安全護具</span>
                            <ul class="icon">
                                <li><a onclick="start_app('wearing')"><i class="fas fa-door-open mr-1"></i>Enter</a>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col topic">
                <div class="box box3">
                    <div class="frame"><img src="../static/img/architect.jpg" id="topic3"></div>
                    <div class="box-content">
                        <div class="inner-content">
                            <h2 class="title">動作流程</h2>
                            <span class="post">無人管制場景下，完成特定動作流程</span>
                            <ul class="icon">
                                <li><a onclick="start_app('process')"><i class="fas fa-door-open mr-1"></i>Enter</a>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col topic  mx-1">
                <div class="box box4">
                    <div class="frame"><img src="../static/img/gate.jpg" id="img-center"></div>
                    <div class="box-content">
                        <div class="inner-content">
                            <h2 class="title">人臉管制</h2>
                            <span class="post">透過人臉辨識進行門禁管制人員進出</span>
                            <ul class="icon">
                                <li><a onclick="start_app('face')"><i class=" fas fa-door-open mr-1"></i>Enter</a>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col topic">
                <div class="box box5">
                    <div class="frame"><img src="../static/img/monitor.jpg" id="img-center"></div>
                    <div class="box-content">
                        <div class="inner-content">
                            <h2 class="title">遠端即時監控</h2>
                            <span class="post ">無線遠端即時監控，並可做通訊溝通</span>
                            <ul class="icon">
                                <li>
                                    <a onclick="start_app('remote')"><i class="fas fa-door-open mr-1"></i>Enter</a>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>

        </div>

    </div>

    <!-- Loading div -->
    <div id="loading" class="loader loader-curtain is-active" data-curtain-text="System Loading..."></div>

    <!--Bootstrap : jQuery, Popper.js, and Bootstrap JS-->
    <script src="../static/bootstrap-4.6.0-dist/jquery-3.6.0.js"></script>
    <script src="../static/bootstrap-5.0.0-beta3-dist/js/bootstrap.bundle.min.js"></script>
    <script src="../static/jquery-smartwizard-master/dist/js/jquery.smartWizard.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.1/dist/umd/popper.min.js"
        integrity="sha384-SR1sx49pcuLnqZUnnPwx6FCym0wLsk5JZuNx2bPPENzswTNFaQU1RDvt3wT4gWFG"
        crossorigin="anonymous"></script>

    <script>
        $(document).ready(function () {
            $('[data-bs-toggle="tooltip"]').tooltip();
            $('#loading').hide();
            if ($(this).height() < 1000)
                $('.frame').height(screen.height * 0.8);
            else
                $('.frame').height(screen.height * 0.9);
        });
        $(window).resize(function () {
            if ($(this).height() < 1000)
                $('.frame').height(screen.height * 0.8);
            else
                $('.frame').height(screen.height * 0.9);
        });

        function start_app(app_name) {
            $('#loading').show();
            $.ajax({
                type: 'GET',
                url: `/start_app/${app_name}`,
                success: function (res) {
                    console.log(res)
                    window.location.assign(`/${app_name}/index`)
                },
                error: function (res) {
                    console.log(res)
                    alert(res.responseText)
                }
            });
            console.log('start app: ' + app_name)
        }

        $('#logout_Btn').click(function () {
            $.ajax({
                type: 'POST',
                async: false,
                url: "/logout",
                contentType: 'application/json; charset=UTF-8',
                data: JSON.stringify('1'),
                success: function (result) {
                swal({
                    title: "登出成功",
                    text: "保持良好的登出習慣~",
                    icon: "success",
                    buttons: false,
                    timer: 1200,
                });
                setTimeout(function () {
                    location.reload();
                }, 1500);
                },
                error: function (errorInfo) {
                swal("登出失敗, 異常error:請聯絡系統開發窗口協助");
                }
            });

        });
    </script>
</body>


</html>